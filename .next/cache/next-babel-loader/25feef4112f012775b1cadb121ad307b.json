{"ast":null,"code":"var _jsxFileName = \"/Users/mbp/Sites/london-clash-nextjs/components/ClanTable.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState } from 'react';\nimport moment from 'moment';\n\nconst processList = list => {\n  return list.map(i => {\n    let lastSeen = moment(i.lastSeen);\n    delete i.tag;\n    delete i['arena.id'];\n    delete i['arena.name'];\n    return _objectSpread({}, i, {\n      lastSeen\n    });\n  });\n};\n\nconst flattenObject = ob => {\n  let toReturn = {};\n\n  for (var i in ob) {\n    if (!ob.hasOwnProperty(i)) continue;\n\n    if (typeof ob[i] == 'object') {\n      var flatObject = flattenObject(ob[i]);\n\n      for (var x in flatObject) {\n        if (!flatObject.hasOwnProperty(x)) continue;\n        toReturn[i + '.' + x] = flatObject[x];\n      }\n    } else {\n      toReturn[i] = ob[i];\n    }\n  }\n\n  return toReturn;\n};\n\nconst sortData = (items, key, alt) => {\n  if (key === 'lastSeen') {\n    return items.sort((a, b) => alt ? moment(a[key]).unix() - moment(b[key]).unix() : moment(b[key]).unix() - moment(a[key]).unix());\n  }\n\n  return items.sort((a, b) => alt ? a[key] - b[key] : b[key] - a[key]);\n};\n\nconst ClanTable = props => {\n  const processedMemberList = processList(props.memberList.map(m => flattenObject(m)));\n  const {\n    0: sort,\n    1: setSort\n  } = useState('score');\n  const {\n    0: alt,\n    1: setAlt\n  } = useState(false);\n  const {\n    0: data,\n    1: setData\n  } = useState(processedMemberList);\n  const sortedData = sortData(data, sort, alt);\n\n  const clickSort = newSort => {\n    if (newSort === sort) {\n      setAlt(!alt);\n    } else {\n      setSort(newSort);\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-309811624\" + \" \" + \"table-responsive\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, __jsx(\"table\", {\n    className: \"jsx-309811624\" + \" \" + 'table table-sm',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, __jsx(\"thead\", {\n    className: \"jsx-309811624\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, __jsx(\"tr\", {\n    className: \"jsx-309811624\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, Object.keys(data[0]).map((k, i) => __jsx(\"th\", {\n    key: i,\n    onClick: () => clickSort(k),\n    className: \"jsx-309811624\" + \" \" + ((sort === k ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, k)))), __jsx(\"tbody\", {\n    className: \"jsx-309811624\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, sortedData.map((p, i) => {\n    // let className = p.score < -1 ? 'bg-danger' : p.score <= 1 ? 'table-danger' : p.score >= 8 ? 'table-warning' : 'table-success'\n    return __jsx(\"tr\", {\n      key: i,\n      className: \"jsx-309811624\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, Object.keys(p).map((k, i) => {\n      if (k === 'lastSeen') return __jsx(\"td\", {\n        key: i,\n        className: \"jsx-309811624\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, p[k].fromNow());\n      return __jsx(\"td\", {\n        key: i,\n        className: \"jsx-309811624\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, p[k]);\n    }));\n  })))), __jsx(_JSXStyle, {\n    id: \"309811624\",\n    __self: this\n  }, \".table-responsive.jsx-309811624{overflow-x:initial;}.table.jsx-309811624{width:100%;}.table.jsx-309811624 thead.jsx-309811624{font-weight:bold;}.table.jsx-309811624 thead.jsx-309811624 th.jsx-309811624{cursor:pointer;position:-webkit-sticky;position:sticky;top:0;background:white;min-width:8rem;}.table.jsx-309811624 thead.jsx-309811624 th.jsx-309811624 span.jsx-309811624{display:block;font-size:0.5rem;}.table.jsx-309811624 thead.jsx-309811624 th.active.jsx-309811624{color:blue;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYnAvU2l0ZXMvbG9uZG9uLWNsYXNoLW5leHRqcy9jb21wb25lbnRzL0NsYW5UYWJsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrRmtCLEFBRzhCLEFBR1IsQUFHTSxBQUdGLEFBT0QsQUFJSCxXQWhCYixBQWlCQSxHQUptQixDQVBELEVBSGxCLEVBTkEsWUFpQkEsd0JBUFEsTUFDVyxpQkFDRixlQUNqQiIsImZpbGUiOiIvVXNlcnMvbWJwL1NpdGVzL2xvbmRvbi1jbGFzaC1uZXh0anMvY29tcG9uZW50cy9DbGFuVGFibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnXG5cbmNvbnN0IHByb2Nlc3NMaXN0ID0gKGxpc3QpID0+IHtcblxuICByZXR1cm4gbGlzdC5tYXAoaSA9PiB7XG4gICAgbGV0IGxhc3RTZWVuID0gbW9tZW50KGkubGFzdFNlZW4pXG4gICAgZGVsZXRlIGkudGFnXG4gICAgZGVsZXRlIGlbJ2FyZW5hLmlkJ11cbiAgICBkZWxldGUgaVsnYXJlbmEubmFtZSddXG4gICAgcmV0dXJuIHsuLi5pLCBsYXN0U2Vlbn1cbiAgfSlcblxuXG59XG5jb25zdCBmbGF0dGVuT2JqZWN0ID0gKG9iKSA9PiB7XG5cdGxldCB0b1JldHVybiA9IHt9O1xuXHRmb3IgKHZhciBpIGluIG9iKSB7XG5cdFx0aWYgKCFvYi5oYXNPd25Qcm9wZXJ0eShpKSkgY29udGludWU7XG5cblx0XHRpZiAoKHR5cGVvZiBvYltpXSkgPT0gJ29iamVjdCcpIHtcblx0XHRcdHZhciBmbGF0T2JqZWN0ID0gZmxhdHRlbk9iamVjdChvYltpXSk7XG5cdFx0XHRmb3IgKHZhciB4IGluIGZsYXRPYmplY3QpIHtcblx0XHRcdFx0aWYgKCFmbGF0T2JqZWN0Lmhhc093blByb3BlcnR5KHgpKSBjb250aW51ZTtcblx0XHRcdFx0dG9SZXR1cm5baSArICcuJyArIHhdID0gZmxhdE9iamVjdFt4XTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dG9SZXR1cm5baV0gPSBvYltpXTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHRvUmV0dXJuO1xufVxuXG5jb25zdCBzb3J0RGF0YSA9IChpdGVtcywga2V5LCBhbHQpID0+IHtcbiAgaWYgKGtleSA9PT0gJ2xhc3RTZWVuJykge1xuICAgIHJldHVybiBpdGVtcy5zb3J0KChhLCBiKSA9PiBhbHQgPyBtb21lbnQoYVtrZXldKS51bml4KCkgLSBtb21lbnQoYltrZXldKS51bml4KCkgOiBtb21lbnQoYltrZXldKS51bml4KCkgLSBtb21lbnQoYVtrZXldKS51bml4KCkgKVxuICB9XG4gIHJldHVybiBpdGVtcy5zb3J0KChhLCBiKSA9PiBhbHQgPyBhW2tleV0gLSBiW2tleV0gOiBiW2tleV0gLSBhW2tleV0pXG59XG5cbmNvbnN0IENsYW5UYWJsZSA9IChwcm9wcykgPT4ge1xuXG4gIGNvbnN0IHByb2Nlc3NlZE1lbWJlckxpc3QgPSBwcm9jZXNzTGlzdChwcm9wcy5tZW1iZXJMaXN0Lm1hcChtID0+IGZsYXR0ZW5PYmplY3QobSkpKVxuXG4gIGNvbnN0IFtzb3J0LCBzZXRTb3J0XSA9IHVzZVN0YXRlKCdzY29yZScpXG4gIGNvbnN0IFthbHQsIHNldEFsdF0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW2RhdGEsIHNldERhdGFdID0gdXNlU3RhdGUocHJvY2Vzc2VkTWVtYmVyTGlzdClcblxuICBjb25zdCBzb3J0ZWREYXRhID0gc29ydERhdGEoZGF0YSwgc29ydCwgYWx0KVxuXG4gIGNvbnN0IGNsaWNrU29ydCA9IChuZXdTb3J0KSA9PiB7XG4gICAgaWYgKG5ld1NvcnQgPT09IHNvcnQpIHtcbiAgICAgIHNldEFsdCghYWx0KVxuICAgIH0gZWxzZSB7XG4gICAgICBzZXRTb3J0KG5ld1NvcnQpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJsZS1yZXNwb25zaXZlXCI+XG4gICAgICAgIDx0YWJsZSBjbGFzc05hbWU9eyd0YWJsZSB0YWJsZS1zbSd9PlxuICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAge09iamVjdC5rZXlzKGRhdGFbMF0pLm1hcCgoaywgaSkgPT4gPHRoIGtleT17aX0gY2xhc3NOYW1lPXtzb3J0ID09PSBrID8gJ2FjdGl2ZScgOiBudWxsfSBvbkNsaWNrPXsoKCkgPT4gY2xpY2tTb3J0KGspKX0+e2t9PC90aD4pfVxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgIHtzb3J0ZWREYXRhLm1hcCgocCwgaSkgPT4ge1xuICAgICAgICAgICAgICAvLyBsZXQgY2xhc3NOYW1lID0gcC5zY29yZSA8IC0xID8gJ2JnLWRhbmdlcicgOiBwLnNjb3JlIDw9IDEgPyAndGFibGUtZGFuZ2VyJyA6IHAuc2NvcmUgPj0gOCA/ICd0YWJsZS13YXJuaW5nJyA6ICd0YWJsZS1zdWNjZXNzJ1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDx0ciBrZXk9e2l9PlxuICAgICAgICAgICAgICAgICAge09iamVjdC5rZXlzKHApLm1hcCgoaywgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoayA9PT0gJ2xhc3RTZWVuJykgcmV0dXJuIDx0ZCBrZXk9e2l9PntwW2tdLmZyb21Ob3coKX08L3RkPlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPHRkIGtleT17aX0+e3Bba119PC90ZD5cbiAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLnRhYmxlLXJlc3BvbnNpdmUge1xuICAgICAgICAgIG92ZXJmbG93LXg6IGluaXRpYWw7XG4gICAgICAgIH1cbiAgICAgICAgLnRhYmxlIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAudGFibGUgdGhlYWQge1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICB9XG4gICAgICAgIC50YWJsZSB0aGVhZCB0aCB7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIHBvc2l0aW9uOiBzdGlja3k7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICAgIG1pbi13aWR0aDogOHJlbTtcbiAgICAgICAgfVxuICAgICAgICAudGFibGUgdGhlYWQgdGggc3BhbiB7XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjVyZW07XG4gICAgICAgIH1cbiAgICAgICAgLnRhYmxlIHRoZWFkIHRoLmFjdGl2ZSB7XG4gICAgICAgICAgY29sb3I6IGJsdWU7XG4gICAgICAgIH1cbiAgICAgICAgYH1cbiAgICAgIDwvc3R5bGU+XG4gICAgPC8+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2xhblRhYmxlO1xuIl19 */\\n/*@ sourceURL=/Users/mbp/Sites/london-clash-nextjs/components/ClanTable.js */\"));\n};\n\nexport default ClanTable;","map":{"version":3,"sources":["/Users/mbp/Sites/london-clash-nextjs/components/ClanTable.js"],"names":["useState","moment","processList","list","map","i","lastSeen","tag","flattenObject","ob","toReturn","hasOwnProperty","flatObject","x","sortData","items","key","alt","sort","a","b","unix","ClanTable","props","processedMemberList","memberList","m","setSort","setAlt","data","setData","sortedData","clickSort","newSort","Object","keys","k","p","fromNow"],"mappings":"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","sourcesContent":["import { useState } from 'react'\nimport moment from 'moment'\n\nconst processList = (list) => {\n\n  return list.map(i => {\n    let lastSeen = moment(i.lastSeen)\n    delete i.tag\n    delete i['arena.id']\n    delete i['arena.name']\n    return {...i, lastSeen}\n  })\n\n\n}\nconst flattenObject = (ob) => {\n\tlet toReturn = {};\n\tfor (var i in ob) {\n\t\tif (!ob.hasOwnProperty(i)) continue;\n\n\t\tif ((typeof ob[i]) == 'object') {\n\t\t\tvar flatObject = flattenObject(ob[i]);\n\t\t\tfor (var x in flatObject) {\n\t\t\t\tif (!flatObject.hasOwnProperty(x)) continue;\n\t\t\t\ttoReturn[i + '.' + x] = flatObject[x];\n\t\t\t}\n\t\t} else {\n\t\t\ttoReturn[i] = ob[i];\n\t\t}\n\t}\n\treturn toReturn;\n}\n\nconst sortData = (items, key, alt) => {\n  if (key === 'lastSeen') {\n    return items.sort((a, b) => alt ? moment(a[key]).unix() - moment(b[key]).unix() : moment(b[key]).unix() - moment(a[key]).unix() )\n  }\n  return items.sort((a, b) => alt ? a[key] - b[key] : b[key] - a[key])\n}\n\nconst ClanTable = (props) => {\n\n  const processedMemberList = processList(props.memberList.map(m => flattenObject(m)))\n\n  const [sort, setSort] = useState('score')\n  const [alt, setAlt] = useState(false)\n  const [data, setData] = useState(processedMemberList)\n\n  const sortedData = sortData(data, sort, alt)\n\n  const clickSort = (newSort) => {\n    if (newSort === sort) {\n      setAlt(!alt)\n    } else {\n      setSort(newSort)\n    }\n  }\n\n  return (\n    <>\n      <div className=\"table-responsive\">\n        <table className={'table table-sm'}>\n          <thead>\n            <tr>\n              {Object.keys(data[0]).map((k, i) => <th key={i} className={sort === k ? 'active' : null} onClick={(() => clickSort(k))}>{k}</th>)}\n            </tr>\n          </thead>\n          <tbody>\n            {sortedData.map((p, i) => {\n              // let className = p.score < -1 ? 'bg-danger' : p.score <= 1 ? 'table-danger' : p.score >= 8 ? 'table-warning' : 'table-success'\n              return (\n                <tr key={i}>\n                  {Object.keys(p).map((k, i) => {\n                    if (k === 'lastSeen') return <td key={i}>{p[k].fromNow()}</td>\n                    return <td key={i}>{p[k]}</td>\n                  })}\n                </tr>\n              )\n            })}\n          </tbody>\n        </table>\n      </div>\n      <style jsx>{`\n        .table-responsive {\n          overflow-x: initial;\n        }\n        .table {\n          width: 100%;\n        }\n        .table thead {\n          font-weight: bold;\n        }\n        .table thead th {\n          cursor: pointer;\n          position: sticky;\n          top: 0;\n          background: white;\n          min-width: 8rem;\n        }\n        .table thead th span {\n          display: block;\n          font-size: 0.5rem;\n        }\n        .table thead th.active {\n          color: blue;\n        }\n        `}\n      </style>\n    </>\n  )\n}\n\nexport default ClanTable;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/mbp/Sites/london-clash-nextjs/components/ClanTable.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\nimport moment from 'moment';\n\nvar processList = function processList(list) {\n  return list.map(function (i) {\n    var lastSeen = moment(i.lastSeen).fromNow('hh');\n    return _objectSpread({}, i, {\n      lastSeen: lastSeen\n    });\n  });\n};\n\nvar flattenObject = function flattenObject(ob) {\n  var toReturn = {};\n\n  for (var i in ob) {\n    if (!ob.hasOwnProperty(i)) continue;\n\n    if (typeof ob[i] == 'object') {\n      var flatObject = flattenObject(ob[i]);\n\n      for (var x in flatObject) {\n        if (!flatObject.hasOwnProperty(x)) continue;\n        toReturn[i + '.' + x] = flatObject[x];\n      }\n    } else {\n      toReturn[i] = ob[i];\n    }\n  }\n\n  return toReturn;\n};\n\nvar sortData = function sortData(items, key, alt) {\n  return items.sort(function (a, b) {\n    return alt ? a[key] - b[key] : b[key] - a[key];\n  });\n};\n\nvar ClanTable = function ClanTable(props) {\n  var processedMemberList = processList(props.memberList.map(function (m) {\n    return flattenObject(m);\n  }));\n\n  var _useState = useState('score'),\n      sort = _useState[0],\n      setSort = _useState[1];\n\n  var _useState2 = useState(false),\n      alt = _useState2[0],\n      setAlt = _useState2[1];\n\n  var _useState3 = useState(processedMemberList),\n      data = _useState3[0],\n      setData = _useState3[1];\n\n  var sortedData = sortData(data, sort, alt);\n\n  var clickSort = function clickSort(newSort) {\n    if (newSort === sort) {\n      setAlt(!alt);\n    } else {\n      setSort(newSort);\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-309811624\" + \" \" + \"table-responsive\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, __jsx(\"table\", {\n    className: \"jsx-309811624\" + \" \" + 'table table-sm',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, __jsx(\"thead\", {\n    className: \"jsx-309811624\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, __jsx(\"tr\", {\n    className: \"jsx-309811624\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, _Object$keys(data[0]).map(function (k) {\n    return __jsx(\"th\", {\n      onClick: function onClick() {\n        return clickSort(k);\n      },\n      className: \"jsx-309811624\" + \" \" + ((sort === k ? 'active' : null) || \"\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, k);\n  }))), __jsx(\"tbody\", {\n    className: \"jsx-309811624\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, sortedData.map(function (p, i) {\n    // let className = p.score < -1 ? 'bg-danger' : p.score <= 1 ? 'table-danger' : p.score >= 8 ? 'table-warning' : 'table-success'\n    return __jsx(\"tr\", {\n      key: i,\n      className: \"jsx-309811624\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, _Object$keys(p).map(function (k) {\n      return __jsx(\"td\", {\n        className: \"jsx-309811624\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, p[k]);\n    }));\n  })))), __jsx(_JSXStyle, {\n    id: \"309811624\",\n    __self: this\n  }, \".table-responsive.jsx-309811624{overflow-x:initial;}.table.jsx-309811624{width:100%;}.table.jsx-309811624 thead.jsx-309811624{font-weight:bold;}.table.jsx-309811624 thead.jsx-309811624 th.jsx-309811624{cursor:pointer;position:-webkit-sticky;position:sticky;top:0;background:white;min-width:8rem;}.table.jsx-309811624 thead.jsx-309811624 th.jsx-309811624 span.jsx-309811624{display:block;font-size:0.5rem;}.table.jsx-309811624 thead.jsx-309811624 th.active.jsx-309811624{color:blue;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYnAvU2l0ZXMvbG9uZG9uLWNsYXNoLW5leHRqcy9jb21wb25lbnRzL0NsYW5UYWJsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5RWtCLEFBRzhCLEFBR1IsQUFHTSxBQUdGLEFBT0QsQUFJSCxXQWhCYixBQWlCQSxHQUptQixDQVBELEVBSGxCLEVBTkEsWUFpQkEsd0JBUFEsTUFDVyxpQkFDRixlQUNqQiIsImZpbGUiOiIvVXNlcnMvbWJwL1NpdGVzL2xvbmRvbi1jbGFzaC1uZXh0anMvY29tcG9uZW50cy9DbGFuVGFibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnXG5cbmNvbnN0IHByb2Nlc3NMaXN0ID0gKGxpc3QpID0+IHtcblxuICByZXR1cm4gbGlzdC5tYXAoaSA9PiB7XG4gICAgbGV0IGxhc3RTZWVuID0gbW9tZW50KGkubGFzdFNlZW4pLmZyb21Ob3coJ2hoJylcbiAgICByZXR1cm4gey4uLmksIGxhc3RTZWVufVxuICB9KVxuXG5cbn1cbmNvbnN0IGZsYXR0ZW5PYmplY3QgPSAob2IpID0+IHtcblx0bGV0IHRvUmV0dXJuID0ge307XG5cdGZvciAodmFyIGkgaW4gb2IpIHtcblx0XHRpZiAoIW9iLmhhc093blByb3BlcnR5KGkpKSBjb250aW51ZTtcblxuXHRcdGlmICgodHlwZW9mIG9iW2ldKSA9PSAnb2JqZWN0Jykge1xuXHRcdFx0dmFyIGZsYXRPYmplY3QgPSBmbGF0dGVuT2JqZWN0KG9iW2ldKTtcblx0XHRcdGZvciAodmFyIHggaW4gZmxhdE9iamVjdCkge1xuXHRcdFx0XHRpZiAoIWZsYXRPYmplY3QuaGFzT3duUHJvcGVydHkoeCkpIGNvbnRpbnVlO1xuXHRcdFx0XHR0b1JldHVybltpICsgJy4nICsgeF0gPSBmbGF0T2JqZWN0W3hdO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0b1JldHVybltpXSA9IG9iW2ldO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gdG9SZXR1cm47XG59XG5cbmNvbnN0IHNvcnREYXRhID0gKGl0ZW1zLCBrZXksIGFsdCkgPT4ge1xuICByZXR1cm4gaXRlbXMuc29ydCgoYSwgYikgPT4gYWx0ID8gYVtrZXldIC0gYltrZXldIDogYltrZXldIC0gYVtrZXldKVxufVxuXG5jb25zdCBDbGFuVGFibGUgPSAocHJvcHMpID0+IHtcblxuICBjb25zdCBwcm9jZXNzZWRNZW1iZXJMaXN0ID0gcHJvY2Vzc0xpc3QocHJvcHMubWVtYmVyTGlzdC5tYXAobSA9PiBmbGF0dGVuT2JqZWN0KG0pKSlcblxuICBjb25zdCBbc29ydCwgc2V0U29ydF0gPSB1c2VTdGF0ZSgnc2NvcmUnKVxuICBjb25zdCBbYWx0LCBzZXRBbHRdID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtkYXRhLCBzZXREYXRhXSA9IHVzZVN0YXRlKHByb2Nlc3NlZE1lbWJlckxpc3QpXG5cbiAgY29uc3Qgc29ydGVkRGF0YSA9IHNvcnREYXRhKGRhdGEsIHNvcnQsIGFsdClcblxuICBjb25zdCBjbGlja1NvcnQgPSAobmV3U29ydCkgPT4ge1xuICAgIGlmIChuZXdTb3J0ID09PSBzb3J0KSB7XG4gICAgICBzZXRBbHQoIWFsdClcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0U29ydChuZXdTb3J0KVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFibGUtcmVzcG9uc2l2ZVwiPlxuICAgICAgICA8dGFibGUgY2xhc3NOYW1lPXsndGFibGUgdGFibGUtc20nfT5cbiAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgIHtPYmplY3Qua2V5cyhkYXRhWzBdKS5tYXAoayA9PiA8dGggY2xhc3NOYW1lPXtzb3J0ID09PSBrID8gJ2FjdGl2ZScgOiBudWxsfSBvbkNsaWNrPXsoKCkgPT4gY2xpY2tTb3J0KGspKX0+e2t9PC90aD4pfVxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgIHtzb3J0ZWREYXRhLm1hcCgocCwgaSkgPT4ge1xuICAgICAgICAgICAgICAvLyBsZXQgY2xhc3NOYW1lID0gcC5zY29yZSA8IC0xID8gJ2JnLWRhbmdlcicgOiBwLnNjb3JlIDw9IDEgPyAndGFibGUtZGFuZ2VyJyA6IHAuc2NvcmUgPj0gOCA/ICd0YWJsZS13YXJuaW5nJyA6ICd0YWJsZS1zdWNjZXNzJ1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDx0ciBrZXk9e2l9PlxuICAgICAgICAgICAgICAgICAge09iamVjdC5rZXlzKHApLm1hcCgoaykgPT4gPHRkPntwW2tdfTwvdGQ+KX1cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICA8L3RhYmxlPlxuICAgICAgPC9kaXY+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC50YWJsZS1yZXNwb25zaXZlIHtcbiAgICAgICAgICBvdmVyZmxvdy14OiBpbml0aWFsO1xuICAgICAgICB9XG4gICAgICAgIC50YWJsZSB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgICAgLnRhYmxlIHRoZWFkIHtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgfVxuICAgICAgICAudGFibGUgdGhlYWQgdGgge1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBwb3NpdGlvbjogc3RpY2t5O1xuICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgICAgICBtaW4td2lkdGg6IDhyZW07XG4gICAgICAgIH1cbiAgICAgICAgLnRhYmxlIHRoZWFkIHRoIHNwYW4ge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC41cmVtO1xuICAgICAgICB9XG4gICAgICAgIC50YWJsZSB0aGVhZCB0aC5hY3RpdmUge1xuICAgICAgICAgIGNvbG9yOiBibHVlO1xuICAgICAgICB9XG4gICAgICAgIGB9XG4gICAgICA8L3N0eWxlPlxuICAgIDwvPlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IENsYW5UYWJsZTtcbiJdfQ== */\\n/*@ sourceURL=/Users/mbp/Sites/london-clash-nextjs/components/ClanTable.js */\"));\n};\n\nexport default ClanTable;","map":{"version":3,"sources":["/Users/mbp/Sites/london-clash-nextjs/components/ClanTable.js"],"names":["useState","moment","processList","list","map","i","lastSeen","fromNow","flattenObject","ob","toReturn","hasOwnProperty","flatObject","x","sortData","items","key","alt","sort","a","b","ClanTable","props","processedMemberList","memberList","m","setSort","setAlt","data","setData","sortedData","clickSort","newSort","k","p"],"mappings":"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","sourcesContent":["import { useState } from 'react'\nimport moment from 'moment'\n\nconst processList = (list) => {\n\n  return list.map(i => {\n    let lastSeen = moment(i.lastSeen).fromNow('hh')\n    return {...i, lastSeen}\n  })\n\n\n}\nconst flattenObject = (ob) => {\n\tlet toReturn = {};\n\tfor (var i in ob) {\n\t\tif (!ob.hasOwnProperty(i)) continue;\n\n\t\tif ((typeof ob[i]) == 'object') {\n\t\t\tvar flatObject = flattenObject(ob[i]);\n\t\t\tfor (var x in flatObject) {\n\t\t\t\tif (!flatObject.hasOwnProperty(x)) continue;\n\t\t\t\ttoReturn[i + '.' + x] = flatObject[x];\n\t\t\t}\n\t\t} else {\n\t\t\ttoReturn[i] = ob[i];\n\t\t}\n\t}\n\treturn toReturn;\n}\n\nconst sortData = (items, key, alt) => {\n  return items.sort((a, b) => alt ? a[key] - b[key] : b[key] - a[key])\n}\n\nconst ClanTable = (props) => {\n\n  const processedMemberList = processList(props.memberList.map(m => flattenObject(m)))\n\n  const [sort, setSort] = useState('score')\n  const [alt, setAlt] = useState(false)\n  const [data, setData] = useState(processedMemberList)\n\n  const sortedData = sortData(data, sort, alt)\n\n  const clickSort = (newSort) => {\n    if (newSort === sort) {\n      setAlt(!alt)\n    } else {\n      setSort(newSort)\n    }\n  }\n\n  return (\n    <>\n      <div className=\"table-responsive\">\n        <table className={'table table-sm'}>\n          <thead>\n            <tr>\n              {Object.keys(data[0]).map(k => <th className={sort === k ? 'active' : null} onClick={(() => clickSort(k))}>{k}</th>)}\n            </tr>\n          </thead>\n          <tbody>\n            {sortedData.map((p, i) => {\n              // let className = p.score < -1 ? 'bg-danger' : p.score <= 1 ? 'table-danger' : p.score >= 8 ? 'table-warning' : 'table-success'\n              return (\n                <tr key={i}>\n                  {Object.keys(p).map((k) => <td>{p[k]}</td>)}\n                </tr>\n              )\n            })}\n          </tbody>\n        </table>\n      </div>\n      <style jsx>{`\n        .table-responsive {\n          overflow-x: initial;\n        }\n        .table {\n          width: 100%;\n        }\n        .table thead {\n          font-weight: bold;\n        }\n        .table thead th {\n          cursor: pointer;\n          position: sticky;\n          top: 0;\n          background: white;\n          min-width: 8rem;\n        }\n        .table thead th span {\n          display: block;\n          font-size: 0.5rem;\n        }\n        .table thead th.active {\n          color: blue;\n        }\n        `}\n      </style>\n    </>\n  )\n}\n\nexport default ClanTable;\n"]},"metadata":{},"sourceType":"module"}
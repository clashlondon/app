{"ast":null,"code":"var _jsxFileName = \"/Users/mbp/Sites/london-clash-nextjs/components/WarPerformance.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\n\nclass WarUser {\n  constructor({\n    name,\n    wins,\n    battlesPlayed,\n    cardsEarned,\n    numberOfBattles\n  }) {\n    this.name = name;\n    this.wins = wins;\n    this.battles = battlesPlayed;\n    this.totalBattles = numberOfBattles;\n    this.cards = cardsEarned;\n  }\n\n  addToKey(key, value) {\n    this[key] += value;\n  }\n\n  get loss() {\n    return this.battles - this.wins;\n  }\n\n  get ratio() {\n    return this.wins / this.totalBattles || 0;\n  }\n\n  get battlesMissed() {\n    return this.totalBattles - this.battles;\n  }\n\n  get inRespect() {\n    return this.ratio >= 0.75 || this.loss === 0 && this.missed === 0;\n  }\n\n  get inDanger() {\n    return this.ratio <= 0.25 || this.battlesMissed >= 3;\n  }\n\n  get score() {\n    return this.wins * this.ratio - this.battlesMissed;\n  }\n\n}\n\nconst processData = items => {\n  let participants = [];\n\n  const findUser = name => participants.find(p => p.name === name);\n\n  items.forEach((war, i) => {\n    war.participants.forEach(user => {\n      var userObj = findUser(user.name);\n\n      if (!!userObj) {\n        userObj.addToKey('battles', user.battlesPlayed);\n        userObj.addToKey('wins', user.wins);\n        userObj.addToKey('cards', user.cardsEarned);\n        userObj.addToKey('totalBattles', user.numberOfBattles);\n      } else {\n        userObj = new WarUser(user);\n        participants.push(userObj);\n      }\n    });\n  });\n  return participants;\n};\n\nconst sortData = (items, key, alt) => {\n  return items.sort((a, b) => alt ? a[key] - b[key] : b[key] - a[key]);\n};\n\nconst WarPerformance = props => {\n  console.log(props);\n  const {\n    0: sort,\n    1: setSort\n  } = useState('wins');\n  const {\n    0: alt,\n    1: setAlt\n  } = useState(false);\n  const {\n    0: data,\n    1: setData\n  } = useState(processData(props.items));\n  const sortedData = sortData(data, sort, alt);\n\n  const clickSort = newSort => {\n    if (newSort === sort) {\n      setAlt(!alt);\n    } else {\n      setSort(newSort);\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"table\", {\n    className: \"jsx-4275466315\" + \" \" + 'table table-sm',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, __jsx(\"thead\", {\n    className: \"jsx-4275466315\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, __jsx(\"tr\", {\n    className: \"jsx-4275466315\" + \" \" + 'header',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, __jsx(\"th\", {\n    className: \"jsx-4275466315\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"Name\"), __jsx(\"th\", {\n    onClick: () => clickSort('cards'),\n    className: \"jsx-4275466315\" + \" \" + ((sort === 'cards' ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Total Battles\"), __jsx(\"th\", {\n    onClick: () => clickSort('wins'),\n    className: \"jsx-4275466315\" + \" \" + ((sort === 'wins' ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Wins\"), __jsx(\"th\", {\n    onClick: () => clickSort('loss'),\n    className: \"jsx-4275466315\" + \" \" + ((sort === 'loss' ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Losses\"), __jsx(\"th\", {\n    onClick: () => clickSort('ratio'),\n    className: \"jsx-4275466315\" + \" \" + ((sort === 'ratio' ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Win/Loss Ratio\"), __jsx(\"th\", {\n    onClick: () => clickSort('battlesMissed'),\n    className: \"jsx-4275466315\" + \" \" + ((sort === 'battlesMissed' ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Battles Missed\"), __jsx(\"th\", {\n    onClick: () => clickSort('cards'),\n    className: \"jsx-4275466315\" + \" \" + ((sort === 'cards' ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Cards\"), __jsx(\"th\", {\n    onClick: () => clickSort('score'),\n    className: \"jsx-4275466315\" + \" \" + ((sort === 'score' ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Score\"))), __jsx(\"tbody\", {\n    className: \"jsx-4275466315\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, sortedData.map((p, i) => {\n    let className = p.score < 0 ? 'bg-danger' : p.score < 0.3 ? 'table-danger' : p.score > 5 ? 'table-success' : p.score > 8 ? 'table-warning' : null;\n    return __jsx(\"tr\", {\n      key: i,\n      className: \"jsx-4275466315\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, __jsx(\"td\", {\n      className: \"jsx-4275466315\" + \" \" + (className || \"\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, p.name), __jsx(\"td\", {\n      className: \"jsx-4275466315\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, p.totalBattles), __jsx(\"td\", {\n      className: \"jsx-4275466315\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, p.wins), __jsx(\"td\", {\n      className: \"jsx-4275466315\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, p.loss), __jsx(\"td\", {\n      className: \"jsx-4275466315\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, p.ratio), __jsx(\"td\", {\n      className: \"jsx-4275466315\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, p.battlesMissed), __jsx(\"td\", {\n      className: \"jsx-4275466315\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, p.cards), __jsx(\"td\", {\n      className: \"jsx-4275466315\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, p.score));\n  }))), __jsx(_JSXStyle, {\n    id: \"4275466315\",\n    __self: this\n  }, \".table.jsx-4275466315{width:100%;}.table.jsx-4275466315 thead.jsx-4275466315{font-weight:bold;}.table.jsx-4275466315 thead.jsx-4275466315 th.jsx-4275466315{cursor:pointer;}.table.jsx-4275466315 thead.jsx-4275466315 th.active.jsx-4275466315{color:blue;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYnAvU2l0ZXMvbG9uZG9uLWNsYXNoLW5leHRqcy9jb21wb25lbnRzL1dhclBlcmZvcm1hbmNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW1Ia0IsQUFHc0IsQUFHTSxBQUdGLEFBR0osV0FSYixBQVNBLElBSEEsRUFIQSIsImZpbGUiOiIvVXNlcnMvbWJwL1NpdGVzL2xvbmRvbi1jbGFzaC1uZXh0anMvY29tcG9uZW50cy9XYXJQZXJmb3JtYW5jZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5cbmNsYXNzIFdhclVzZXIge1xuICBjb25zdHJ1Y3Rvcih7bmFtZSwgd2lucywgYmF0dGxlc1BsYXllZCwgY2FyZHNFYXJuZWQsIG51bWJlck9mQmF0dGxlc30pIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgdGhpcy53aW5zID0gd2luc1xuICAgIHRoaXMuYmF0dGxlcyA9IGJhdHRsZXNQbGF5ZWRcbiAgICB0aGlzLnRvdGFsQmF0dGxlcyA9IG51bWJlck9mQmF0dGxlc1xuICAgIHRoaXMuY2FyZHMgPSBjYXJkc0Vhcm5lZFxuICB9XG5cbiAgYWRkVG9LZXkoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXNba2V5XSArPSB2YWx1ZVxuICB9XG5cbiAgZ2V0IGxvc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmF0dGxlcyAtIHRoaXMud2luc1xuICB9XG5cbiAgZ2V0IHJhdGlvKCkge1xuICAgIHJldHVybiB0aGlzLndpbnMgLyB0aGlzLnRvdGFsQmF0dGxlcyB8fCAwXG4gIH1cblxuICBnZXQgYmF0dGxlc01pc3NlZCgpIHtcbiAgICByZXR1cm4gdGhpcy50b3RhbEJhdHRsZXMgLSB0aGlzLmJhdHRsZXNcbiAgfVxuXG4gIGdldCBpblJlc3BlY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMucmF0aW8gPj0gMC43NSB8fCB0aGlzLmxvc3MgPT09IDAgJiYgdGhpcy5taXNzZWQgPT09IDBcbiAgfVxuXG4gIGdldCBpbkRhbmdlcigpIHtcbiAgICByZXR1cm4gdGhpcy5yYXRpbyA8PSAwLjI1IHx8IHRoaXMuYmF0dGxlc01pc3NlZCA+PSAzXG4gIH1cblxuICBnZXQgc2NvcmUoKSB7XG4gICAgcmV0dXJuICh0aGlzLndpbnMgKiB0aGlzLnJhdGlvKSAtIHRoaXMuYmF0dGxlc01pc3NlZFxuICB9XG59XG5cbmNvbnN0IHByb2Nlc3NEYXRhID0gKGl0ZW1zKSA9PiB7XG4gIGxldCBwYXJ0aWNpcGFudHMgPSBbXVxuICBjb25zdCBmaW5kVXNlciA9IChuYW1lKSA9PiBwYXJ0aWNpcGFudHMuZmluZCgocCkgPT4gcC5uYW1lID09PSBuYW1lKTtcbiAgaXRlbXMuZm9yRWFjaCgod2FyLCBpKSA9PiB7XG4gICAgICB3YXIucGFydGljaXBhbnRzLmZvckVhY2goKHVzZXIpID0+IHtcbiAgICAgICAgICB2YXIgdXNlck9iaiA9IGZpbmRVc2VyKHVzZXIubmFtZSlcbiAgICAgICAgICBpZiAoISF1c2VyT2JqKSB7XG4gICAgICAgICAgICAgIHVzZXJPYmouYWRkVG9LZXkoJ2JhdHRsZXMnLCB1c2VyLmJhdHRsZXNQbGF5ZWQpXG4gICAgICAgICAgICAgIHVzZXJPYmouYWRkVG9LZXkoJ3dpbnMnLCB1c2VyLndpbnMpXG4gICAgICAgICAgICAgIHVzZXJPYmouYWRkVG9LZXkoJ2NhcmRzJywgdXNlci5jYXJkc0Vhcm5lZClcbiAgICAgICAgICAgICAgdXNlck9iai5hZGRUb0tleSgndG90YWxCYXR0bGVzJywgdXNlci5udW1iZXJPZkJhdHRsZXMpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdXNlck9iaiA9IG5ldyBXYXJVc2VyKHVzZXIpXG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50cy5wdXNoKHVzZXJPYmopXG4gICAgICAgICAgfVxuICAgICAgfSlcbiAgfSlcbiAgcmV0dXJuIHBhcnRpY2lwYW50c1xufVxuXG5jb25zdCBzb3J0RGF0YSA9IChpdGVtcywga2V5LCBhbHQpID0+IHtcbiAgcmV0dXJuIGl0ZW1zLnNvcnQoKGEsIGIpID0+IGFsdCA/IGFba2V5XSAtIGJba2V5XSA6IGJba2V5XSAtIGFba2V5XSlcbn1cblxuY29uc3QgV2FyUGVyZm9ybWFuY2UgPSAocHJvcHMpID0+IHtcblxuICBjb25zb2xlLmxvZyhwcm9wcylcblxuICBjb25zdCBbc29ydCwgc2V0U29ydF0gPSB1c2VTdGF0ZSgnd2lucycpXG4gIGNvbnN0IFthbHQsIHNldEFsdF0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW2RhdGEsIHNldERhdGFdID0gdXNlU3RhdGUocHJvY2Vzc0RhdGEocHJvcHMuaXRlbXMpKVxuXG4gIGNvbnN0IHNvcnRlZERhdGEgPSBzb3J0RGF0YShkYXRhLCBzb3J0LCBhbHQpXG5cbiAgY29uc3QgY2xpY2tTb3J0ID0gKG5ld1NvcnQpID0+IHtcbiAgICBpZiAobmV3U29ydCA9PT0gc29ydCkge1xuICAgICAgc2V0QWx0KCFhbHQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFNvcnQobmV3U29ydClcbiAgICB9XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8dGFibGUgY2xhc3NOYW1lPXsndGFibGUgdGFibGUtc20nfT5cbiAgICAgICAgPHRoZWFkPlxuICAgICAgICAgIDx0ciBjbGFzc05hbWU9eydoZWFkZXInfT5cbiAgICAgICAgICAgIDx0aD5OYW1lPC90aD5cbiAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9e3NvcnQgPT09ICdjYXJkcycgPyAnYWN0aXZlJyA6IG51bGx9IG9uQ2xpY2s9eygoKSA9PiBjbGlja1NvcnQoJ2NhcmRzJykpfT5Ub3RhbCBCYXR0bGVzPC90aD5cbiAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9e3NvcnQgPT09ICd3aW5zJyA/ICdhY3RpdmUnIDogbnVsbH0gb25DbGljaz17KCgpID0+IGNsaWNrU29ydCgnd2lucycpKX0+V2luczwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3NOYW1lPXtzb3J0ID09PSAnbG9zcycgPyAnYWN0aXZlJyA6IG51bGx9IG9uQ2xpY2s9eygoKSA9PiBjbGlja1NvcnQoJ2xvc3MnKSl9Pkxvc3NlczwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3NOYW1lPXtzb3J0ID09PSAncmF0aW8nID8gJ2FjdGl2ZScgOiBudWxsfSBvbkNsaWNrPXsoKCkgPT4gY2xpY2tTb3J0KCdyYXRpbycpKX0+V2luL0xvc3MgUmF0aW88L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT17c29ydCA9PT0gJ2JhdHRsZXNNaXNzZWQnID8gJ2FjdGl2ZScgOiBudWxsfSBvbkNsaWNrPXsoKCkgPT4gY2xpY2tTb3J0KCdiYXR0bGVzTWlzc2VkJykpfT5CYXR0bGVzIE1pc3NlZDwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3NOYW1lPXtzb3J0ID09PSAnY2FyZHMnID8gJ2FjdGl2ZScgOiBudWxsfSBvbkNsaWNrPXsoKCkgPT4gY2xpY2tTb3J0KCdjYXJkcycpKX0+Q2FyZHM8L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT17c29ydCA9PT0gJ3Njb3JlJyA/ICdhY3RpdmUnIDogbnVsbH0gb25DbGljaz17KCgpID0+IGNsaWNrU29ydCgnc2NvcmUnKSl9PlNjb3JlPC90aD5cbiAgICAgICAgICA8L3RyPlxuICAgICAgICA8L3RoZWFkPlxuICAgICAgICA8dGJvZHk+XG4gICAgICAgICAge3NvcnRlZERhdGEubWFwKChwLCBpKSA9PiB7XG4gICAgICAgICAgICBsZXQgY2xhc3NOYW1lID0gcC5zY29yZSA8IDAgPyAnYmctZGFuZ2VyJyA6IHAuc2NvcmUgPCAwLjMgPyAndGFibGUtZGFuZ2VyJyA6IHAuc2NvcmUgPiA1ID8gJ3RhYmxlLXN1Y2Nlc3MnIDogcC5zY29yZSA+IDggPyAndGFibGUtd2FybmluZycgOiBudWxsXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8dHIga2V5PXtpfT5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPXtjbGFzc05hbWV9PntwLm5hbWV9PC90ZD5cbiAgICAgICAgICAgICAgICA8dGQ+e3AudG90YWxCYXR0bGVzfTwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPntwLndpbnN9PC90ZD5cbiAgICAgICAgICAgICAgICA8dGQ+e3AubG9zc308L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD57cC5yYXRpb308L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD57cC5iYXR0bGVzTWlzc2VkfTwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPntwLmNhcmRzfTwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPntwLnNjb3JlfTwvdGQ+XG4gICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvdGJvZHk+XG4gICAgICA8L3RhYmxlPlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAudGFibGUge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIC50YWJsZSB0aGVhZCB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgIH1cbiAgICAgICAgLnRhYmxlIHRoZWFkIHRoIHtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnRhYmxlIHRoZWFkIHRoLmFjdGl2ZSB7XG4gICAgICAgICAgY29sb3I6IGJsdWU7XG4gICAgICAgIH1cbiAgICAgICAgYH1cbiAgICAgIDwvc3R5bGU+XG4gICAgPC8+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgV2FyUGVyZm9ybWFuY2U7XG4iXX0= */\\n/*@ sourceURL=/Users/mbp/Sites/london-clash-nextjs/components/WarPerformance.js */\"));\n};\n\nexport default WarPerformance;","map":{"version":3,"sources":["/Users/mbp/Sites/london-clash-nextjs/components/WarPerformance.js"],"names":["useState","WarUser","constructor","name","wins","battlesPlayed","cardsEarned","numberOfBattles","battles","totalBattles","cards","addToKey","key","value","loss","ratio","battlesMissed","inRespect","missed","inDanger","score","processData","items","participants","findUser","find","p","forEach","war","i","user","userObj","push","sortData","alt","sort","a","b","WarPerformance","props","console","log","setSort","setAlt","data","setData","sortedData","clickSort","newSort","map","className"],"mappings":"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","sourcesContent":["import { useState } from 'react'\n\nclass WarUser {\n  constructor({name, wins, battlesPlayed, cardsEarned, numberOfBattles}) {\n    this.name = name\n    this.wins = wins\n    this.battles = battlesPlayed\n    this.totalBattles = numberOfBattles\n    this.cards = cardsEarned\n  }\n\n  addToKey(key, value) {\n    this[key] += value\n  }\n\n  get loss() {\n    return this.battles - this.wins\n  }\n\n  get ratio() {\n    return this.wins / this.totalBattles || 0\n  }\n\n  get battlesMissed() {\n    return this.totalBattles - this.battles\n  }\n\n  get inRespect() {\n    return this.ratio >= 0.75 || this.loss === 0 && this.missed === 0\n  }\n\n  get inDanger() {\n    return this.ratio <= 0.25 || this.battlesMissed >= 3\n  }\n\n  get score() {\n    return (this.wins * this.ratio) - this.battlesMissed\n  }\n}\n\nconst processData = (items) => {\n  let participants = []\n  const findUser = (name) => participants.find((p) => p.name === name);\n  items.forEach((war, i) => {\n      war.participants.forEach((user) => {\n          var userObj = findUser(user.name)\n          if (!!userObj) {\n              userObj.addToKey('battles', user.battlesPlayed)\n              userObj.addToKey('wins', user.wins)\n              userObj.addToKey('cards', user.cardsEarned)\n              userObj.addToKey('totalBattles', user.numberOfBattles)\n          } else {\n              userObj = new WarUser(user)\n              participants.push(userObj)\n          }\n      })\n  })\n  return participants\n}\n\nconst sortData = (items, key, alt) => {\n  return items.sort((a, b) => alt ? a[key] - b[key] : b[key] - a[key])\n}\n\nconst WarPerformance = (props) => {\n\n  console.log(props)\n\n  const [sort, setSort] = useState('wins')\n  const [alt, setAlt] = useState(false)\n  const [data, setData] = useState(processData(props.items))\n\n  const sortedData = sortData(data, sort, alt)\n\n  const clickSort = (newSort) => {\n    if (newSort === sort) {\n      setAlt(!alt)\n    } else {\n      setSort(newSort)\n    }\n  }\n\n  return (\n    <>\n      <table className={'table table-sm'}>\n        <thead>\n          <tr className={'header'}>\n            <th>Name</th>\n            <th className={sort === 'cards' ? 'active' : null} onClick={(() => clickSort('cards'))}>Total Battles</th>\n            <th className={sort === 'wins' ? 'active' : null} onClick={(() => clickSort('wins'))}>Wins</th>\n            <th className={sort === 'loss' ? 'active' : null} onClick={(() => clickSort('loss'))}>Losses</th>\n            <th className={sort === 'ratio' ? 'active' : null} onClick={(() => clickSort('ratio'))}>Win/Loss Ratio</th>\n            <th className={sort === 'battlesMissed' ? 'active' : null} onClick={(() => clickSort('battlesMissed'))}>Battles Missed</th>\n            <th className={sort === 'cards' ? 'active' : null} onClick={(() => clickSort('cards'))}>Cards</th>\n            <th className={sort === 'score' ? 'active' : null} onClick={(() => clickSort('score'))}>Score</th>\n          </tr>\n        </thead>\n        <tbody>\n          {sortedData.map((p, i) => {\n            let className = p.score < 0 ? 'bg-danger' : p.score < 0.3 ? 'table-danger' : p.score > 5 ? 'table-success' : p.score > 8 ? 'table-warning' : null\n            return (\n              <tr key={i}>\n                <td className={className}>{p.name}</td>\n                <td>{p.totalBattles}</td>\n                <td>{p.wins}</td>\n                <td>{p.loss}</td>\n                <td>{p.ratio}</td>\n                <td>{p.battlesMissed}</td>\n                <td>{p.cards}</td>\n                <td>{p.score}</td>\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n      <style jsx>{`\n        .table {\n          width: 100%;\n        }\n        .table thead {\n          font-weight: bold;\n        }\n        .table thead th {\n          cursor: pointer;\n        }\n        .table thead th.active {\n          color: blue;\n        }\n        `}\n      </style>\n    </>\n  )\n}\n\nexport default WarPerformance;\n"]},"metadata":{},"sourceType":"module"}
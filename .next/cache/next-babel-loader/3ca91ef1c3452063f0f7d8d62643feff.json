{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar _jsxFileName = \"/Users/mbp/Sites/london-clash-nextjs/pages/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { ClanData, WarLog } from '../api';\nimport { Button } from \"shards-react\";\nimport moment from 'moment';\n\nfunction filterMember(key) {\n  return true;\n}\n\nvar WarParticipants = function WarParticipants(props) {\n  return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  }, props.name);\n};\n\nvar WarSeason = function WarSeason(props) {\n  return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }, __jsx(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17\n    },\n    __self: this\n  }, props.seasonId), __jsx(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18\n    },\n    __self: this\n  }, moment(props.createdDate).fromNow()), props.participants.map(function (d, i) {\n    return __jsx(WarParticipants, _extends({\n      key: i\n    }, d, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19\n      },\n      __self: this\n    }));\n  }));\n};\n\nvar WarWinLoss = function WarWinLoss(props) {\n  var participants = [];\n\n  var findUser = function findUser(name) {\n    return participants.find(function (p) {\n      return p.name === name;\n    });\n  };\n\n  props.items.forEach(function (war, i) {\n    console.log(\"war \".concat(i), war);\n    war.participants.forEach(function (_ref) {\n      var name = _ref.name,\n          battlesPlayed = _ref.battlesPlayed,\n          wins = _ref.wins;\n      var userObj = findUser(name);\n\n      if (!!userObj) {\n        userObj.battlesPlayed += battlesPlayed;\n        userObj.wins += wins;\n      } else {\n        userObj = {\n          name: name,\n          battlesPlayed: battlesPlayed,\n          wins: wins\n        };\n        participants.push(userObj);\n      }\n    });\n  });\n  participants.sort(function (a, b) {\n    return b[\"wins\"] - a[\"wins\"] || a[\"battlesPlayed\"] - b[\"battlesPlayed\"];\n  });\n  return participants.map(function (p) {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, __jsx(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, \"Name: \", p.name), __jsx(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, \"Battles: \", p.battlesPlayed), __jsx(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, \"Wins: \", p.wins));\n  });\n};\n\nvar HomePage = function HomePage(props) {\n  return __jsx(React.Fragment, null, __jsx(WarWinLoss, _extends({}, props.warlog, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  })));\n};\n\nHomePage.getInitialProps = function _callee() {\n  var warlog;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(WarLog());\n\n        case 2:\n          warlog = _context.sent;\n          return _context.abrupt(\"return\", {\n            warlog: warlog\n          });\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexport default HomePage;","map":{"version":3,"sources":["/Users/mbp/Sites/london-clash-nextjs/pages/index.js"],"names":["ClanData","WarLog","Button","moment","filterMember","key","WarParticipants","props","name","WarSeason","seasonId","createdDate","fromNow","participants","map","d","i","WarWinLoss","findUser","find","p","items","forEach","war","console","log","battlesPlayed","wins","userObj","push","sort","a","b","HomePage","warlog","getInitialProps"],"mappings":"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","sourcesContent":["import { ClanData, WarLog } from '../api'\nimport { Button } from \"shards-react\";\nimport moment from 'moment';\n\nfunction filterMember(key) {\n  return true\n}\n\nconst WarParticipants = (props) => (\n  <div>\n    {props.name}\n  </div>\n)\n\nconst WarSeason = (props) => (\n  <div>\n    <h2>{props.seasonId}</h2>\n    <h3>{moment(props.createdDate).fromNow()}</h3>\n    {props.participants.map((d,i) => <WarParticipants key={i} {...d}></WarParticipants>)}\n  </div>\n)\n\nconst WarWinLoss = (props) => {\n  var participants = []\n  var findUser = (name) => participants.find((p) => p.name === name);\n\n  props.items.forEach((war, i) => {\n      console.log(`war ${i}`, war);\n      war.participants.forEach(({name, battlesPlayed, wins}) => {\n          var userObj = findUser(name)\n          if (!!userObj) {\n              userObj.battlesPlayed += battlesPlayed\n              userObj.wins += wins\n          } else {\n              userObj = {name, battlesPlayed, wins}\n              participants.push(userObj)\n          }\n      })\n  })\n\n  participants.sort((a, b) => b[\"wins\"] - a[\"wins\"] || a[\"battlesPlayed\"] - b[\"battlesPlayed\"])\n\n  return participants.map(p => <div><span>Name: {p.name}</span><span>Battles: {p.battlesPlayed}</span><span>Wins: {p.wins}</span></div>)\n\n}\n\nconst HomePage = (props) => (\n  <>\n    <WarWinLoss {...props.warlog}/>\n  </>\n)\n\nHomePage.getInitialProps = async function() {\n  const warlog = await WarLog()\n  return { warlog }\n}\n\nexport default HomePage\n"]},"metadata":{},"sourceType":"module"}
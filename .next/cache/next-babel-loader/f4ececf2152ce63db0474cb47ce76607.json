{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nvar _jsxFileName = \"/Users/mbp/Sites/london-clash-nextjs/components/WarPerformance.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\n\nvar WarUser =\n/*#__PURE__*/\nfunction () {\n  function WarUser(_ref) {\n    var name = _ref.name,\n        wins = _ref.wins,\n        battlesPlayed = _ref.battlesPlayed,\n        cardsEarned = _ref.cardsEarned,\n        numberOfBattles = _ref.numberOfBattles;\n\n    _classCallCheck(this, WarUser);\n\n    this.name = name;\n    this.wins = wins;\n    this.battles = battlesPlayed;\n    this.totalBattles = numberOfBattles;\n    this.cards = cardsEarned;\n  }\n\n  _createClass(WarUser, [{\n    key: \"addToKey\",\n    value: function addToKey(key, value) {\n      this[key] += value;\n    }\n  }, {\n    key: \"loss\",\n    get: function get() {\n      return this.battles - this.wins;\n    }\n  }, {\n    key: \"ratio\",\n    get: function get() {\n      return this.wins / this.totalBattles;\n    }\n  }, {\n    key: \"battlesMissed\",\n    get: function get() {\n      return this.totalBattles - this.battles;\n    }\n  }, {\n    key: \"inRespect\",\n    get: function get() {\n      return this.ratio >= 0.75 || this.loss === 0 && this.missed === 0;\n    }\n  }, {\n    key: \"inDanger\",\n    get: function get() {\n      return this.ratio <= 0.25 || this.battlesMissed >= 3;\n    }\n  }, {\n    key: \"score\",\n    get: function get() {\n      return this.wins * (this.wins / this.battles) - this.battlesMissed * 1.5;\n    }\n  }]);\n\n  return WarUser;\n}();\n\nvar processData = function processData(items) {\n  var participants = [];\n\n  var findUser = function findUser(name) {\n    return participants.find(function (p) {\n      return p.name === name;\n    });\n  };\n\n  items.forEach(function (war, i) {\n    war.participants.forEach(function (user) {\n      var userObj = findUser(user.name);\n\n      if (!!userObj) {\n        userObj.addToKey('battles', user.battlesPlayed);\n        userObj.addToKey('wins', user.wins);\n        userObj.addToKey('cards', user.cardsEarned);\n        userObj.addToKey('totalBattles', user.numberOfBattles);\n      } else {\n        userObj = new WarUser(user);\n        participants.push(userObj);\n      }\n    });\n  });\n  return participants;\n};\n\nvar sortData = function sortData(items, key, alt) {\n  return items.sort(function (a, b) {\n    return alt ? a[key] - b[key] : b[key] - a[key];\n  });\n};\n\nvar WarPerformance = function WarPerformance(props) {\n  var _useState = useState('score'),\n      sort = _useState[0],\n      setSort = _useState[1];\n\n  var _useState2 = useState(false),\n      alt = _useState2[0],\n      setAlt = _useState2[1];\n\n  var _useState3 = useState(processData(props.items)),\n      data = _useState3[0],\n      setData = _useState3[1];\n\n  var sortedData = sortData(data, sort, alt);\n\n  var clickSort = function clickSort(newSort) {\n    if (newSort === sort) {\n      setAlt(!alt);\n    } else {\n      setSort(newSort);\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"table\", {\n    className: \"jsx-1852041768\" + \" \" + 'table table-sm',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, __jsx(\"thead\", {\n    className: \"jsx-1852041768\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, __jsx(\"tr\", {\n    className: \"jsx-1852041768\" + \" \" + 'header',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, __jsx(\"th\", {\n    className: \"jsx-1852041768\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Name\"), __jsx(\"th\", {\n    onClick: function onClick() {\n      return clickSort('cards');\n    },\n    className: \"jsx-1852041768\" + \" \" + ((sort === 'cards' ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"Total Battles\"), __jsx(\"th\", {\n    onClick: function onClick() {\n      return clickSort('wins');\n    },\n    className: \"jsx-1852041768\" + \" \" + ((sort === 'wins' ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"Wins\"), __jsx(\"th\", {\n    onClick: function onClick() {\n      return clickSort('loss');\n    },\n    className: \"jsx-1852041768\" + \" \" + ((sort === 'loss' ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Losses\"), __jsx(\"th\", {\n    onClick: function onClick() {\n      return clickSort('ratio');\n    },\n    className: \"jsx-1852041768\" + \" \" + ((sort === 'ratio' ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Win Ratio\", __jsx(\"span\", {\n    className: \"jsx-1852041768\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"wins / battles\")), __jsx(\"th\", {\n    onClick: function onClick() {\n      return clickSort('battlesMissed');\n    },\n    className: \"jsx-1852041768\" + \" \" + ((sort === 'battlesMissed' ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Battles Missed\"), __jsx(\"th\", {\n    onClick: function onClick() {\n      return clickSort('score');\n    },\n    className: \"jsx-1852041768\" + \" \" + ((sort === 'score' ? 'active' : null) || \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Score\", __jsx(\"span\", {\n    className: \"jsx-1852041768\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"(wins * (wins / battles played)) - missed battles\")))), __jsx(\"tbody\", {\n    className: \"jsx-1852041768\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, sortedData.map(function (p, i) {\n    var className = p.score < -1 ? 'bg-danger' : p.score < 0 ? 'table-danger' : p.score > 5 ? 'table-success' : p.score > 7.5 ? 'table-warning' : null;\n    return __jsx(\"tr\", {\n      key: i,\n      className: \"jsx-1852041768\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, __jsx(\"td\", {\n      className: \"jsx-1852041768\" + \" \" + (className || \"\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, p.name), __jsx(\"td\", {\n      className: \"jsx-1852041768\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, p.totalBattles), __jsx(\"td\", {\n      className: \"jsx-1852041768\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, p.wins), __jsx(\"td\", {\n      className: \"jsx-1852041768\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, p.loss), __jsx(\"td\", {\n      className: \"jsx-1852041768\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, p.ratio), __jsx(\"td\", {\n      className: \"jsx-1852041768\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, p.battlesMissed), __jsx(\"td\", {\n      className: \"jsx-1852041768\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, p.score));\n  }))), __jsx(_JSXStyle, {\n    id: \"1852041768\",\n    __self: this\n  }, \".table.jsx-1852041768{width:100%;}.table.jsx-1852041768 thead.jsx-1852041768{font-weight:bold;}.table.jsx-1852041768 thead.jsx-1852041768 th.jsx-1852041768{cursor:pointer;}.table.jsx-1852041768 thead.jsx-1852041768 th.jsx-1852041768 span.jsx-1852041768{display:block;font-size:0.5rem;}.table.jsx-1852041768 thead.jsx-1852041768 th.active.jsx-1852041768{color:blue;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYnAvU2l0ZXMvbG9uZG9uLWNsYXNoLW5leHRqcy9jb21wb25lbnRzL1dhclBlcmZvcm1hbmNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQStHa0IsQUFHc0IsQUFHTSxBQUdGLEFBR0QsQUFJSCxXQVpiLEFBYUEsR0FKbUIsQ0FIbkIsRUFIQSxjQU9BIiwiZmlsZSI6Ii9Vc2Vycy9tYnAvU2l0ZXMvbG9uZG9uLWNsYXNoLW5leHRqcy9jb21wb25lbnRzL1dhclBlcmZvcm1hbmNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcblxuY2xhc3MgV2FyVXNlciB7XG4gIGNvbnN0cnVjdG9yKHtuYW1lLCB3aW5zLCBiYXR0bGVzUGxheWVkLCBjYXJkc0Vhcm5lZCwgbnVtYmVyT2ZCYXR0bGVzfSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICB0aGlzLndpbnMgPSB3aW5zXG4gICAgdGhpcy5iYXR0bGVzID0gYmF0dGxlc1BsYXllZFxuICAgIHRoaXMudG90YWxCYXR0bGVzID0gbnVtYmVyT2ZCYXR0bGVzXG4gICAgdGhpcy5jYXJkcyA9IGNhcmRzRWFybmVkXG4gIH1cblxuICBhZGRUb0tleShrZXksIHZhbHVlKSB7XG4gICAgdGhpc1trZXldICs9IHZhbHVlXG4gIH1cblxuICBnZXQgbG9zcygpIHtcbiAgICByZXR1cm4gdGhpcy5iYXR0bGVzIC0gdGhpcy53aW5zXG4gIH1cblxuICBnZXQgcmF0aW8oKSB7XG4gICAgcmV0dXJuIHRoaXMud2lucyAvIHRoaXMudG90YWxCYXR0bGVzXG4gIH1cblxuICBnZXQgYmF0dGxlc01pc3NlZCgpIHtcbiAgICByZXR1cm4gdGhpcy50b3RhbEJhdHRsZXMgLSB0aGlzLmJhdHRsZXNcbiAgfVxuXG4gIGdldCBpblJlc3BlY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMucmF0aW8gPj0gMC43NSB8fCB0aGlzLmxvc3MgPT09IDAgJiYgdGhpcy5taXNzZWQgPT09IDBcbiAgfVxuXG4gIGdldCBpbkRhbmdlcigpIHtcbiAgICByZXR1cm4gdGhpcy5yYXRpbyA8PSAwLjI1IHx8IHRoaXMuYmF0dGxlc01pc3NlZCA+PSAzXG4gIH1cblxuICBnZXQgc2NvcmUoKSB7XG4gICAgcmV0dXJuICh0aGlzLndpbnMgKiAodGhpcy53aW5zIC8gdGhpcy5iYXR0bGVzKSkgLSAodGhpcy5iYXR0bGVzTWlzc2VkICogMS41KVxuICB9XG59XG5cbmNvbnN0IHByb2Nlc3NEYXRhID0gKGl0ZW1zKSA9PiB7XG4gIGxldCBwYXJ0aWNpcGFudHMgPSBbXVxuICBjb25zdCBmaW5kVXNlciA9IChuYW1lKSA9PiBwYXJ0aWNpcGFudHMuZmluZCgocCkgPT4gcC5uYW1lID09PSBuYW1lKTtcbiAgaXRlbXMuZm9yRWFjaCgod2FyLCBpKSA9PiB7XG4gICAgICB3YXIucGFydGljaXBhbnRzLmZvckVhY2goKHVzZXIpID0+IHtcbiAgICAgICAgICB2YXIgdXNlck9iaiA9IGZpbmRVc2VyKHVzZXIubmFtZSlcbiAgICAgICAgICBpZiAoISF1c2VyT2JqKSB7XG4gICAgICAgICAgICAgIHVzZXJPYmouYWRkVG9LZXkoJ2JhdHRsZXMnLCB1c2VyLmJhdHRsZXNQbGF5ZWQpXG4gICAgICAgICAgICAgIHVzZXJPYmouYWRkVG9LZXkoJ3dpbnMnLCB1c2VyLndpbnMpXG4gICAgICAgICAgICAgIHVzZXJPYmouYWRkVG9LZXkoJ2NhcmRzJywgdXNlci5jYXJkc0Vhcm5lZClcbiAgICAgICAgICAgICAgdXNlck9iai5hZGRUb0tleSgndG90YWxCYXR0bGVzJywgdXNlci5udW1iZXJPZkJhdHRsZXMpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdXNlck9iaiA9IG5ldyBXYXJVc2VyKHVzZXIpXG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50cy5wdXNoKHVzZXJPYmopXG4gICAgICAgICAgfVxuICAgICAgfSlcbiAgfSlcbiAgcmV0dXJuIHBhcnRpY2lwYW50c1xufVxuXG5jb25zdCBzb3J0RGF0YSA9IChpdGVtcywga2V5LCBhbHQpID0+IHtcbiAgcmV0dXJuIGl0ZW1zLnNvcnQoKGEsIGIpID0+IGFsdCA/IGFba2V5XSAtIGJba2V5XSA6IGJba2V5XSAtIGFba2V5XSlcbn1cblxuY29uc3QgV2FyUGVyZm9ybWFuY2UgPSAocHJvcHMpID0+IHtcblxuICBjb25zdCBbc29ydCwgc2V0U29ydF0gPSB1c2VTdGF0ZSgnc2NvcmUnKVxuICBjb25zdCBbYWx0LCBzZXRBbHRdID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtkYXRhLCBzZXREYXRhXSA9IHVzZVN0YXRlKHByb2Nlc3NEYXRhKHByb3BzLml0ZW1zKSlcblxuICBjb25zdCBzb3J0ZWREYXRhID0gc29ydERhdGEoZGF0YSwgc29ydCwgYWx0KVxuXG4gIGNvbnN0IGNsaWNrU29ydCA9IChuZXdTb3J0KSA9PiB7XG4gICAgaWYgKG5ld1NvcnQgPT09IHNvcnQpIHtcbiAgICAgIHNldEFsdCghYWx0KVxuICAgIH0gZWxzZSB7XG4gICAgICBzZXRTb3J0KG5ld1NvcnQpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPHRhYmxlIGNsYXNzTmFtZT17J3RhYmxlIHRhYmxlLXNtJ30+XG4gICAgICAgIDx0aGVhZD5cbiAgICAgICAgICA8dHIgY2xhc3NOYW1lPXsnaGVhZGVyJ30+XG4gICAgICAgICAgICA8dGg+TmFtZTwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3NOYW1lPXtzb3J0ID09PSAnY2FyZHMnID8gJ2FjdGl2ZScgOiBudWxsfSBvbkNsaWNrPXsoKCkgPT4gY2xpY2tTb3J0KCdjYXJkcycpKX0+VG90YWwgQmF0dGxlczwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3NOYW1lPXtzb3J0ID09PSAnd2lucycgPyAnYWN0aXZlJyA6IG51bGx9IG9uQ2xpY2s9eygoKSA9PiBjbGlja1NvcnQoJ3dpbnMnKSl9PldpbnM8L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT17c29ydCA9PT0gJ2xvc3MnID8gJ2FjdGl2ZScgOiBudWxsfSBvbkNsaWNrPXsoKCkgPT4gY2xpY2tTb3J0KCdsb3NzJykpfT5Mb3NzZXM8L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT17c29ydCA9PT0gJ3JhdGlvJyA/ICdhY3RpdmUnIDogbnVsbH0gb25DbGljaz17KCgpID0+IGNsaWNrU29ydCgncmF0aW8nKSl9PldpbiBSYXRpbzxzcGFuPndpbnMgLyBiYXR0bGVzPC9zcGFuPjwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3NOYW1lPXtzb3J0ID09PSAnYmF0dGxlc01pc3NlZCcgPyAnYWN0aXZlJyA6IG51bGx9IG9uQ2xpY2s9eygoKSA9PiBjbGlja1NvcnQoJ2JhdHRsZXNNaXNzZWQnKSl9PkJhdHRsZXMgTWlzc2VkPC90aD5cbiAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9e3NvcnQgPT09ICdzY29yZScgPyAnYWN0aXZlJyA6IG51bGx9IG9uQ2xpY2s9eygoKSA9PiBjbGlja1NvcnQoJ3Njb3JlJykpfT5TY29yZTxzcGFuPih3aW5zICogKHdpbnMgLyBiYXR0bGVzIHBsYXllZCkpIC0gbWlzc2VkIGJhdHRsZXM8L3NwYW4+PC90aD5cbiAgICAgICAgICA8L3RyPlxuICAgICAgICA8L3RoZWFkPlxuICAgICAgICA8dGJvZHk+XG4gICAgICAgICAge3NvcnRlZERhdGEubWFwKChwLCBpKSA9PiB7XG4gICAgICAgICAgICBsZXQgY2xhc3NOYW1lID0gcC5zY29yZSA8IC0xID8gJ2JnLWRhbmdlcicgOiBwLnNjb3JlIDwgMCA/ICd0YWJsZS1kYW5nZXInIDogcC5zY29yZSA+IDUgPyAndGFibGUtc3VjY2VzcycgOiBwLnNjb3JlID4gNy41ID8gJ3RhYmxlLXdhcm5pbmcnIDogbnVsbFxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPHRyIGtleT17aX0+XG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT17Y2xhc3NOYW1lfT57cC5uYW1lfTwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPntwLnRvdGFsQmF0dGxlc308L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD57cC53aW5zfTwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPntwLmxvc3N9PC90ZD5cbiAgICAgICAgICAgICAgICA8dGQ+e3AucmF0aW99PC90ZD5cbiAgICAgICAgICAgICAgICA8dGQ+e3AuYmF0dGxlc01pc3NlZH08L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD57cC5zY29yZX08L3RkPlxuICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pfVxuICAgICAgICA8L3Rib2R5PlxuICAgICAgPC90YWJsZT5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLnRhYmxlIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAudGFibGUgdGhlYWQge1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICB9XG4gICAgICAgIC50YWJsZSB0aGVhZCB0aCB7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB9XG4gICAgICAgIC50YWJsZSB0aGVhZCB0aCBzcGFuIHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBmb250LXNpemU6IDAuNXJlbTtcbiAgICAgICAgfVxuICAgICAgICAudGFibGUgdGhlYWQgdGguYWN0aXZlIHtcbiAgICAgICAgICBjb2xvcjogYmx1ZTtcbiAgICAgICAgfVxuICAgICAgICBgfVxuICAgICAgPC9zdHlsZT5cbiAgICA8Lz5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBXYXJQZXJmb3JtYW5jZTtcbiJdfQ== */\\n/*@ sourceURL=/Users/mbp/Sites/london-clash-nextjs/components/WarPerformance.js */\"));\n};\n\nexport default WarPerformance;","map":{"version":3,"sources":["/Users/mbp/Sites/london-clash-nextjs/components/WarPerformance.js"],"names":["useState","WarUser","name","wins","battlesPlayed","cardsEarned","numberOfBattles","battles","totalBattles","cards","key","value","ratio","loss","missed","battlesMissed","processData","items","participants","findUser","find","p","forEach","war","i","user","userObj","addToKey","push","sortData","alt","sort","a","b","WarPerformance","props","setSort","setAlt","data","setData","sortedData","clickSort","newSort","map","className","score"],"mappings":"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","sourcesContent":["import { useState } from 'react'\n\nclass WarUser {\n  constructor({name, wins, battlesPlayed, cardsEarned, numberOfBattles}) {\n    this.name = name\n    this.wins = wins\n    this.battles = battlesPlayed\n    this.totalBattles = numberOfBattles\n    this.cards = cardsEarned\n  }\n\n  addToKey(key, value) {\n    this[key] += value\n  }\n\n  get loss() {\n    return this.battles - this.wins\n  }\n\n  get ratio() {\n    return this.wins / this.totalBattles\n  }\n\n  get battlesMissed() {\n    return this.totalBattles - this.battles\n  }\n\n  get inRespect() {\n    return this.ratio >= 0.75 || this.loss === 0 && this.missed === 0\n  }\n\n  get inDanger() {\n    return this.ratio <= 0.25 || this.battlesMissed >= 3\n  }\n\n  get score() {\n    return (this.wins * (this.wins / this.battles)) - (this.battlesMissed * 1.5)\n  }\n}\n\nconst processData = (items) => {\n  let participants = []\n  const findUser = (name) => participants.find((p) => p.name === name);\n  items.forEach((war, i) => {\n      war.participants.forEach((user) => {\n          var userObj = findUser(user.name)\n          if (!!userObj) {\n              userObj.addToKey('battles', user.battlesPlayed)\n              userObj.addToKey('wins', user.wins)\n              userObj.addToKey('cards', user.cardsEarned)\n              userObj.addToKey('totalBattles', user.numberOfBattles)\n          } else {\n              userObj = new WarUser(user)\n              participants.push(userObj)\n          }\n      })\n  })\n  return participants\n}\n\nconst sortData = (items, key, alt) => {\n  return items.sort((a, b) => alt ? a[key] - b[key] : b[key] - a[key])\n}\n\nconst WarPerformance = (props) => {\n\n  const [sort, setSort] = useState('score')\n  const [alt, setAlt] = useState(false)\n  const [data, setData] = useState(processData(props.items))\n\n  const sortedData = sortData(data, sort, alt)\n\n  const clickSort = (newSort) => {\n    if (newSort === sort) {\n      setAlt(!alt)\n    } else {\n      setSort(newSort)\n    }\n  }\n\n  return (\n    <>\n      <table className={'table table-sm'}>\n        <thead>\n          <tr className={'header'}>\n            <th>Name</th>\n            <th className={sort === 'cards' ? 'active' : null} onClick={(() => clickSort('cards'))}>Total Battles</th>\n            <th className={sort === 'wins' ? 'active' : null} onClick={(() => clickSort('wins'))}>Wins</th>\n            <th className={sort === 'loss' ? 'active' : null} onClick={(() => clickSort('loss'))}>Losses</th>\n            <th className={sort === 'ratio' ? 'active' : null} onClick={(() => clickSort('ratio'))}>Win Ratio<span>wins / battles</span></th>\n            <th className={sort === 'battlesMissed' ? 'active' : null} onClick={(() => clickSort('battlesMissed'))}>Battles Missed</th>\n            <th className={sort === 'score' ? 'active' : null} onClick={(() => clickSort('score'))}>Score<span>(wins * (wins / battles played)) - missed battles</span></th>\n          </tr>\n        </thead>\n        <tbody>\n          {sortedData.map((p, i) => {\n            let className = p.score < -1 ? 'bg-danger' : p.score < 0 ? 'table-danger' : p.score > 5 ? 'table-success' : p.score > 7.5 ? 'table-warning' : null\n            return (\n              <tr key={i}>\n                <td className={className}>{p.name}</td>\n                <td>{p.totalBattles}</td>\n                <td>{p.wins}</td>\n                <td>{p.loss}</td>\n                <td>{p.ratio}</td>\n                <td>{p.battlesMissed}</td>\n                <td>{p.score}</td>\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n      <style jsx>{`\n        .table {\n          width: 100%;\n        }\n        .table thead {\n          font-weight: bold;\n        }\n        .table thead th {\n          cursor: pointer;\n        }\n        .table thead th span {\n          display: block;\n          font-size: 0.5rem;\n        }\n        .table thead th.active {\n          color: blue;\n        }\n        `}\n      </style>\n    </>\n  )\n}\n\nexport default WarPerformance;\n"]},"metadata":{},"sourceType":"module"}
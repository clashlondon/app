{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\n\nvar WarUser =\n/*#__PURE__*/\nfunction () {\n  function WarUser(_ref) {\n    var name = _ref.name,\n        wins = _ref.wins,\n        battlesPlayed = _ref.battlesPlayed,\n        cardsEarned = _ref.cardsEarned,\n        numberOfBattles = _ref.numberOfBattles;\n\n    _classCallCheck(this, WarUser);\n\n    this.name = name;\n    this.wins = wins;\n    this.battles = battlesPlayed;\n    this.totalBattles = numberOfBattles;\n    this.cards = cardsEarned;\n  }\n\n  _createClass(WarUser, [{\n    key: \"addToKey\",\n    value: function addToKey(key, value) {\n      this[key] += value;\n    }\n  }, {\n    key: \"loss\",\n    get: function get() {\n      return this.battles - this.wins;\n    }\n  }, {\n    key: \"ratio\",\n    get: function get() {\n      return this.wins / this.totalBattles;\n    }\n  }, {\n    key: \"battlesMissed\",\n    get: function get() {\n      return this.totalBattles - this.battles;\n    }\n  }, {\n    key: \"inRespect\",\n    get: function get() {\n      return this.ratio >= 0.75 || this.loss === 0 && this.missed === 0;\n    }\n  }, {\n    key: \"inDanger\",\n    get: function get() {\n      return this.ratio <= 0.25 || this.battlesMissed >= 3;\n    }\n  }, {\n    key: \"score\",\n    get: function get() {\n      return (this.wins * (this.wins / this.battles) - this.battlesMissed * 2.5 * this.battlesMissed + this.wins * 0.5).toFixed(2);\n    }\n  }]);\n\n  return WarUser;\n}();\n\nvar processData = function processData(items) {\n  var participants = [];\n\n  var findUser = function findUser(name) {\n    return participants.find(function (p) {\n      return p.name === name;\n    });\n  };\n\n  items.forEach(function (war, i) {\n    war.participants.forEach(function (user) {\n      var userObj = findUser(user.name);\n\n      if (!!userObj) {\n        userObj.addToKey('battles', user.battlesPlayed);\n        userObj.addToKey('wins', user.wins);\n        userObj.addToKey('cards', user.cardsEarned);\n        userObj.addToKey('totalBattles', user.numberOfBattles);\n      } else {\n        userObj = new WarUser(user);\n        participants.push(userObj);\n      }\n    });\n  });\n  return participants;\n};\n\nvar sortData = function sortData(items, key, alt) {\n  return items.sort(function (a, b) {\n    return alt ? a[key] - b[key] : b[key] - a[key];\n  });\n};\n\nvar WarPerformance = function WarPerformance(props) {\n  var _useState = useState('score'),\n      sort = _useState[0],\n      setSort = _useState[1];\n\n  var _useState2 = useState(false),\n      alt = _useState2[0],\n      setAlt = _useState2[1];\n\n  var _useState3 = useState(processData(props.items)),\n      data = _useState3[0],\n      setData = _useState3[1];\n\n  var sortedData = sortData(data, sort, alt);\n\n  var clickSort = function clickSort(newSort) {\n    if (newSort === sort) {\n      setAlt(!alt);\n    } else {\n      setSort(newSort);\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"header\", {\n    className: \"jsx-309811624\" + \" \" + \"p-4\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-309811624\"\n  }, \"ClashLondon\")), __jsx(\"div\", {\n    className: \"jsx-309811624\" + \" \" + \"table-responsive\"\n  }, __jsx(\"table\", {\n    className: \"jsx-309811624\" + \" \" + 'table table-sm'\n  }, __jsx(\"thead\", {\n    className: \"jsx-309811624\"\n  }, __jsx(\"tr\", {\n    className: \"jsx-309811624\"\n  }, __jsx(\"th\", {\n    className: \"jsx-309811624\"\n  }, \"Name\"), __jsx(\"th\", {\n    onClick: function onClick() {\n      return clickSort('score');\n    },\n    className: \"jsx-309811624\" + \" \" + ((sort === 'score' ? 'active' : null) || \"\")\n  }, \"Score\"), __jsx(\"th\", {\n    onClick: function onClick() {\n      return clickSort('totalBattles');\n    },\n    className: \"jsx-309811624\" + \" \" + ((sort === 'totalBattles' ? 'active' : null) || \"\")\n  }, \"Total Battles\"), __jsx(\"th\", {\n    onClick: function onClick() {\n      return clickSort('wins');\n    },\n    className: \"jsx-309811624\" + \" \" + ((sort === 'wins' ? 'active' : null) || \"\")\n  }, \"Wins\"), __jsx(\"th\", {\n    onClick: function onClick() {\n      return clickSort('loss');\n    },\n    className: \"jsx-309811624\" + \" \" + ((sort === 'loss' ? 'active' : null) || \"\")\n  }, \"Losses\"), __jsx(\"th\", {\n    onClick: function onClick() {\n      return clickSort('ratio');\n    },\n    className: \"jsx-309811624\" + \" \" + ((sort === 'ratio' ? 'active' : null) || \"\")\n  }, \"Win Ratio\", __jsx(\"span\", {\n    className: \"jsx-309811624\"\n  }, \"wins/battles\")), __jsx(\"th\", {\n    onClick: function onClick() {\n      return clickSort('battlesMissed');\n    },\n    className: \"jsx-309811624\" + \" \" + ((sort === 'battlesMissed' ? 'active' : null) || \"\")\n  }, \"Battles Missed\"))), __jsx(\"tbody\", {\n    className: \"jsx-309811624\"\n  }, sortedData.map(function (p, i) {\n    var className = p.score < -1 ? 'bg-danger' : p.score <= 1 ? 'table-danger' : p.score >= 8 ? 'table-warning' : 'table-success';\n    return __jsx(\"tr\", {\n      key: i,\n      className: \"jsx-309811624\"\n    }, __jsx(\"td\", {\n      className: \"jsx-309811624\" + \" \" + (className || \"\")\n    }, p.name), __jsx(\"td\", {\n      className: \"jsx-309811624\"\n    }, p.score), __jsx(\"td\", {\n      className: \"jsx-309811624\"\n    }, p.totalBattles), __jsx(\"td\", {\n      className: \"jsx-309811624\"\n    }, p.wins), __jsx(\"td\", {\n      className: \"jsx-309811624\"\n    }, p.loss), __jsx(\"td\", {\n      className: \"jsx-309811624\"\n    }, p.ratio.toFixed(2)), __jsx(\"td\", {\n      className: \"jsx-309811624\"\n    }, p.battlesMissed));\n  })))), __jsx(_JSXStyle, {\n    id: \"309811624\"\n  }, [\".table-responsive.jsx-309811624{overflow-x:initial;}\", \".table.jsx-309811624{width:100%;}\", \".table.jsx-309811624 thead.jsx-309811624{font-weight:bold;}\", \".table.jsx-309811624 thead.jsx-309811624 th.jsx-309811624{cursor:pointer;position:-webkit-sticky;position:sticky;top:0;background:white;min-width:8rem;}\", \".table.jsx-309811624 thead.jsx-309811624 th.jsx-309811624 span.jsx-309811624{display:block;font-size:0.5rem;}\", \".table.jsx-309811624 thead.jsx-309811624 th.active.jsx-309811624{color:blue;}\"]));\n};\n\nexport default WarPerformance;","map":null,"metadata":{},"sourceType":"module"}
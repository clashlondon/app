{"ast":null,"code":"var _jsxFileName = \"/Users/mbp/Sites/london-clash-nextjs/components/WarPerformance.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\n\nclass WarUser {\n  constructor({\n    name,\n    wins,\n    battlesPlayed\n  }) {\n    this.name = name;\n    this.wins = wins;\n    this.battles = battlesPlayed;\n  }\n\n  addWins(wins) {\n    this.wins += wins;\n  }\n\n  addBattles(battles) {\n    this.battles += battles;\n  }\n\n  get ratio() {\n    return this.wins / this.battles || 0;\n  }\n\n}\n\nconst processData = items => {\n  let participants = [];\n\n  const findUser = name => participants.find(p => p.name === name);\n\n  items.forEach((war, i) => {\n    war.participants.forEach(user => {\n      var userObj = findUser(user.name);\n\n      if (!!userObj) {\n        userObj.addBattles(user.battlesPlayed);\n        userObj.addWins(user.wins);\n      } else {\n        userObj = new WarUser(user);\n        participants.push(userObj);\n      }\n    });\n  });\n  return participants;\n};\n\nlet lastKey = null;\nlet alt = false;\n\nconst sortData = (items, key) => {\n  alt = key === lastKey ? !alt : false;\n  return items.sort((a, b) => alt ? a[key] - b[key] : b[key] - a[key]);\n};\n\nconst WarPerformance = props => {\n  const {\n    0: sort,\n    1: setSort\n  } = useState(['wins']);\n  const {\n    0: alt,\n    1: setAlt\n  } = useState(false);\n  const {\n    0: data,\n    1: setData\n  } = useState(processData(props.items));\n  const sortedData = sortData(data, sort, alt);\n\n  const clickSort = newSort => {\n    console.log(newSort, sort, alt);\n\n    if (newSort === sort) {\n      setAlt(!alt);\n    } else {\n      setSort(newSort);\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"table\", {\n    className: \"jsx-1777624385\" + \" \" + 'table',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, __jsx(\"thead\", {\n    className: \"jsx-1777624385\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, __jsx(\"tr\", {\n    className: \"jsx-1777624385\" + \" \" + 'header',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, __jsx(\"th\", {\n    className: \"jsx-1777624385\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Name\"), __jsx(\"th\", {\n    onClick: () => clickSort('wins'),\n    className: \"jsx-1777624385\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \"Wins\"), __jsx(\"th\", {\n    onClick: () => clickSort('battles'),\n    className: \"jsx-1777624385\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Battles\"), __jsx(\"th\", {\n    onClick: () => clickSort('ratio'),\n    className: \"jsx-1777624385\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Ratio\"))), __jsx(\"tbody\", {\n    className: \"jsx-1777624385\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, sortedData.map((p, i) => __jsx(\"tr\", {\n    key: i,\n    className: \"jsx-1777624385\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, __jsx(\"td\", {\n    className: \"jsx-1777624385\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, p.name), __jsx(\"td\", {\n    className: \"jsx-1777624385\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, p.wins), __jsx(\"td\", {\n    className: \"jsx-1777624385\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, p.battles), __jsx(\"td\", {\n    className: \"jsx-1777624385\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, p.ratio))))), __jsx(_JSXStyle, {\n    id: \"1777624385\",\n    __self: this\n  }, \".table.jsx-1777624385{width:100%;}.table.jsx-1777624385 .header.jsx-1777624385{font-weight:bold;}.table.jsx-1777624385>div.jsx-1777624385 span.jsx-1777624385{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;text-align:left;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYnAvU2l0ZXMvbG9uZG9uLWNsYXNoLW5leHRqcy9jb21wb25lbnRzL1dhclBlcmZvcm1hbmNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXNGa0IsQUFHc0IsQUFHTSxBQVFMLFdBVmQsTUFHQSxzREFRa0IsZ0JBQ2xCIiwiZmlsZSI6Ii9Vc2Vycy9tYnAvU2l0ZXMvbG9uZG9uLWNsYXNoLW5leHRqcy9jb21wb25lbnRzL1dhclBlcmZvcm1hbmNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcblxuY2xhc3MgV2FyVXNlciB7XG4gIGNvbnN0cnVjdG9yKHtuYW1lLCB3aW5zLCBiYXR0bGVzUGxheWVkfSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICB0aGlzLndpbnMgPSB3aW5zXG4gICAgdGhpcy5iYXR0bGVzID0gYmF0dGxlc1BsYXllZFxuICB9XG5cbiAgYWRkV2lucyh3aW5zKSB7XG4gICAgdGhpcy53aW5zICs9IHdpbnNcbiAgfVxuXG4gIGFkZEJhdHRsZXMoYmF0dGxlcykge1xuICAgIHRoaXMuYmF0dGxlcyArPSAgYmF0dGxlc1xuICB9XG5cbiAgZ2V0IHJhdGlvKCkge1xuICAgIHJldHVybiB0aGlzLndpbnMgLyB0aGlzLmJhdHRsZXMgfHwgMFxuICB9XG59XG5cbmNvbnN0IHByb2Nlc3NEYXRhID0gKGl0ZW1zKSA9PiB7XG4gIGxldCBwYXJ0aWNpcGFudHMgPSBbXVxuICBjb25zdCBmaW5kVXNlciA9IChuYW1lKSA9PiBwYXJ0aWNpcGFudHMuZmluZCgocCkgPT4gcC5uYW1lID09PSBuYW1lKTtcbiAgaXRlbXMuZm9yRWFjaCgod2FyLCBpKSA9PiB7XG4gICAgICB3YXIucGFydGljaXBhbnRzLmZvckVhY2goKHVzZXIpID0+IHtcbiAgICAgICAgICB2YXIgdXNlck9iaiA9IGZpbmRVc2VyKHVzZXIubmFtZSlcbiAgICAgICAgICBpZiAoISF1c2VyT2JqKSB7XG4gICAgICAgICAgICAgIHVzZXJPYmouYWRkQmF0dGxlcyh1c2VyLmJhdHRsZXNQbGF5ZWQpXG4gICAgICAgICAgICAgIHVzZXJPYmouYWRkV2lucyh1c2VyLndpbnMpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdXNlck9iaiA9IG5ldyBXYXJVc2VyKHVzZXIpXG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50cy5wdXNoKHVzZXJPYmopXG4gICAgICAgICAgfVxuICAgICAgfSlcbiAgfSlcbiAgcmV0dXJuIHBhcnRpY2lwYW50c1xufVxuXG5sZXQgbGFzdEtleSA9IG51bGxcbmxldCBhbHQgPSBmYWxzZVxuY29uc3Qgc29ydERhdGEgPSAoaXRlbXMsIGtleSkgPT4ge1xuICBhbHQgPSAoa2V5ID09PSBsYXN0S2V5KSA/ICFhbHQgOiBmYWxzZVxuICByZXR1cm4gaXRlbXMuc29ydCgoYSwgYikgPT4gYWx0ID8gYVtrZXldIC0gYltrZXldIDogYltrZXldIC0gYVtrZXldKVxufVxuXG5jb25zdCBXYXJQZXJmb3JtYW5jZSA9IChwcm9wcykgPT4ge1xuXG4gIGNvbnN0IFtzb3J0LCBzZXRTb3J0XSA9IHVzZVN0YXRlKFsnd2lucyddKVxuICBjb25zdCBbYWx0LCBzZXRBbHRdID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtkYXRhLCBzZXREYXRhXSA9IHVzZVN0YXRlKHByb2Nlc3NEYXRhKHByb3BzLml0ZW1zKSlcblxuICBjb25zdCBzb3J0ZWREYXRhID0gc29ydERhdGEoZGF0YSwgc29ydCwgYWx0KVxuXG4gIGNvbnN0IGNsaWNrU29ydCA9IChuZXdTb3J0KSA9PiB7XG4gICAgY29uc29sZS5sb2cobmV3U29ydCwgc29ydCwgYWx0KTtcbiAgICBpZiAobmV3U29ydCA9PT0gc29ydCkge1xuICAgICAgc2V0QWx0KCFhbHQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFNvcnQobmV3U29ydClcbiAgICB9XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8dGFibGUgY2xhc3NOYW1lPXsndGFibGUnfT5cbiAgICAgICAgPHRoZWFkPlxuICAgICAgICAgIDx0ciBjbGFzc05hbWU9eydoZWFkZXInfT5cbiAgICAgICAgICAgIDx0aD5OYW1lPC90aD5cbiAgICAgICAgICAgIDx0aCBvbkNsaWNrPXsoKCkgPT4gY2xpY2tTb3J0KCd3aW5zJykpfT5XaW5zPC90aD5cbiAgICAgICAgICAgIDx0aCBvbkNsaWNrPXsoKCkgPT4gY2xpY2tTb3J0KCdiYXR0bGVzJykpfT5CYXR0bGVzPC90aD5cbiAgICAgICAgICAgIDx0aCBvbkNsaWNrPXsoKCkgPT4gY2xpY2tTb3J0KCdyYXRpbycpKX0+UmF0aW88L3RoPlxuICAgICAgICAgIDwvdHI+XG4gICAgICAgIDwvdGhlYWQ+XG4gICAgICAgIDx0Ym9keT5cbiAgICAgICAgICB7c29ydGVkRGF0YS5tYXAoKHAsIGkpID0+IChcbiAgICAgICAgICAgIDx0ciBrZXk9e2l9PlxuICAgICAgICAgICAgICA8dGQ+e3AubmFtZX08L3RkPlxuICAgICAgICAgICAgICA8dGQ+e3Aud2luc308L3RkPlxuICAgICAgICAgICAgICA8dGQ+e3AuYmF0dGxlc308L3RkPlxuICAgICAgICAgICAgICA8dGQ+e3AucmF0aW99PC90ZD5cbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvdGJvZHk+XG4gICAgICA8L3RhYmxlPlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAudGFibGUge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIC50YWJsZSAuaGVhZGVyIHtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgfVxuICAgICAgICAudGFibGUgPiBkaXYge1xuICAgICAgICAgIC8vIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgLy8gZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAyMCUgMjAlIDMwJSAzMCU7XG4gICAgICAgICAgLy8gZ3JpZC10ZW1wbGF0ZS1yb3dzOiAxMDB2aDtcbiAgICAgICAgfVxuICAgICAgICAudGFibGUgPiBkaXYgc3BhbiB7XG4gICAgICAgICAgZmxleC1ncm93OiAxO1xuICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgYH1cbiAgICAgIDwvc3R5bGU+XG4gICAgPC8+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgV2FyUGVyZm9ybWFuY2U7XG4iXX0= */\\n/*@ sourceURL=/Users/mbp/Sites/london-clash-nextjs/components/WarPerformance.js */\"));\n};\n\nexport default WarPerformance;","map":{"version":3,"sources":["/Users/mbp/Sites/london-clash-nextjs/components/WarPerformance.js"],"names":["useState","WarUser","constructor","name","wins","battlesPlayed","battles","addWins","addBattles","ratio","processData","items","participants","findUser","find","p","forEach","war","i","user","userObj","push","lastKey","alt","sortData","key","sort","a","b","WarPerformance","props","setSort","setAlt","data","setData","sortedData","clickSort","newSort","console","log","map"],"mappings":"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","sourcesContent":["import { useState } from 'react'\n\nclass WarUser {\n  constructor({name, wins, battlesPlayed}) {\n    this.name = name\n    this.wins = wins\n    this.battles = battlesPlayed\n  }\n\n  addWins(wins) {\n    this.wins += wins\n  }\n\n  addBattles(battles) {\n    this.battles +=  battles\n  }\n\n  get ratio() {\n    return this.wins / this.battles || 0\n  }\n}\n\nconst processData = (items) => {\n  let participants = []\n  const findUser = (name) => participants.find((p) => p.name === name);\n  items.forEach((war, i) => {\n      war.participants.forEach((user) => {\n          var userObj = findUser(user.name)\n          if (!!userObj) {\n              userObj.addBattles(user.battlesPlayed)\n              userObj.addWins(user.wins)\n          } else {\n              userObj = new WarUser(user)\n              participants.push(userObj)\n          }\n      })\n  })\n  return participants\n}\n\nlet lastKey = null\nlet alt = false\nconst sortData = (items, key) => {\n  alt = (key === lastKey) ? !alt : false\n  return items.sort((a, b) => alt ? a[key] - b[key] : b[key] - a[key])\n}\n\nconst WarPerformance = (props) => {\n\n  const [sort, setSort] = useState(['wins'])\n  const [alt, setAlt] = useState(false)\n  const [data, setData] = useState(processData(props.items))\n\n  const sortedData = sortData(data, sort, alt)\n\n  const clickSort = (newSort) => {\n    console.log(newSort, sort, alt);\n    if (newSort === sort) {\n      setAlt(!alt)\n    } else {\n      setSort(newSort)\n    }\n  }\n\n  return (\n    <>\n      <table className={'table'}>\n        <thead>\n          <tr className={'header'}>\n            <th>Name</th>\n            <th onClick={(() => clickSort('wins'))}>Wins</th>\n            <th onClick={(() => clickSort('battles'))}>Battles</th>\n            <th onClick={(() => clickSort('ratio'))}>Ratio</th>\n          </tr>\n        </thead>\n        <tbody>\n          {sortedData.map((p, i) => (\n            <tr key={i}>\n              <td>{p.name}</td>\n              <td>{p.wins}</td>\n              <td>{p.battles}</td>\n              <td>{p.ratio}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n      <style jsx>{`\n        .table {\n          width: 100%;\n        }\n        .table .header {\n          font-weight: bold;\n        }\n        .table > div {\n          // display: grid;\n          // grid-template-columns: 20% 20% 30% 30%;\n          // grid-template-rows: 100vh;\n        }\n        .table > div span {\n          flex-grow: 1;\n          text-align: left;\n        }\n        `}\n      </style>\n    </>\n  )\n}\n\nexport default WarPerformance;\n"]},"metadata":{},"sourceType":"module"}